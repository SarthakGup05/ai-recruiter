{
  "meta": {
    "project": "HireAI",
    "date": "2026-02-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "HireAI is a recruiter-focused hiring platform that enables authenticated recruiters to create and manage job postings, receive and manage applications, run AI-driven interviews and evaluations, and schedule interviews with calendar integration. It exposes REST APIs for authentication, job CRUD, public job listings, applications, interview orchestration, and webhook handlers for calendar sync.",
  "core_goals": [
    "Provide secure recruiter authentication and session management (JWT cookie) to protect recruiter workflows.",
    "Enable full job lifecycle management (create, read, update, delete, publish, archive) with public job listings.",
    "Support candidate application submission and recruiter-side application CRUD and status management.",
    "Orchestrate AI interview sessions (scheduling, interview rooms, transcripts) and produce AI-driven evaluations.",
    "Integrate calendar/webhook handling to sync scheduled interviews and notifications.",
    "Expose public APIs for job discovery while protecting recruiter-only endpoints with auth middleware."
  ],
  "features": [
    {
      "name": "Authentication",
      "description": "Allow users (recruiters) to register, log in, maintain a JWT-based session cookie (hireai-token) and log out. Protect recruiter routes with middleware.",
      "user_flows": [
        "POST /api/auth/register with valid {email,password,name} -> Receive 201 and set cookie 'hireai-token' -> POST /api/auth/login with same credentials -> Receive 200 and 'hireai-token' cookie -> POST /api/auth/logout with 'hireai-token' cookie -> Receive 200 and cookie cleared",
        "POST /api/auth/login with invalid password -> Receive 401 with error 'invalid credentials'"
      ]
    },
    {
      "name": "Job Management",
      "description": "CRUD operations for job postings: recruiters can create, view, update, soft-delete (archive) and list jobs. Public jobs are exposed separately for candidates.",
      "user_flows": [
        "POST /api/auth/login with valid recruiter credentials -> Receive 200 and 'hireai-token' cookie -> POST /api/jobs with job payload and 'hireai-token' cookie -> Receive 201 with {id, slug} -> GET /api/jobs with 'hireai-token' cookie -> Receive 200 with list including new job -> GET /api/jobs/{id} with 'hireai-token' cookie -> Receive 200 with job details",
        "POST /api/jobs without authentication cookie -> Receive 401 Unauthorized -> POST /api/jobs with 'hireai-token' but invalid payload (missing title) -> Receive 400 Validation Error"
      ]
    },
    {
      "name": "Application Management",
      "description": "Public-facing application submission endpoint and recruiter-facing application retrieval and update endpoints (status updates, evaluations).",
      "user_flows": [
        "GET /api/public/jobs/{slug} (public) -> Receive 200 with job details -> POST /api/applications with {jobId, name, email, cv} -> Receive 201 with applicationId -> POST /api/auth/login as recruiter -> Receive 200 and 'hireai-token' cookie -> GET /api/applications/{applicationId} with 'hireai-token' cookie -> Receive 200 with application and match score",
        "POST /api/applications with missing required field (cv) -> Receive 400 Missing field error -> GET /api/applications/{applicationId} without auth -> Receive 401 Unauthorized"
      ]
    },
    {
      "name": "Public Job Board",
      "description": "Public APIs for job discovery and job detail pages so candidates can browse and apply without authentication.",
      "user_flows": [
        "GET /api/public/jobs -> Receive 200 with paginated list of public job cards -> GET /api/public/jobs/{slug} -> Receive 200 with full job details",
        "GET /api/public/jobs/{slug} with non-existent slug -> Receive 404 Not Found"
      ]
    },
    {
      "name": "AI Interview System",
      "description": "Recruiters can schedule AI interview sessions for candidates, open a room token for the interview (real-time chat/recorder), submit transcripts, and receive AI evaluations and match scores.",
      "user_flows": [
        "POST /api/auth/login as recruiter -> Receive 200 and 'hireai-token' cookie -> POST /api/interviews/schedule with {jobId,candidateId,scheduledAt,duration} and 'hireai-token' cookie -> Receive 201 with {interviewId, roomToken} -> GET /api/room/{roomToken} -> Receive 200 with room connection info -> POST /api/interviews/{interviewId}/transcript with transcript payload and 'hireai-token' cookie -> Receive 200 with evaluation and match score",
        "POST /api/interviews/schedule with invalid candidateId -> Receive 400 Invalid candidate error -> GET /api/room/{invalidToken} -> Receive 404 Room not found"
      ]
    },
    {
      "name": "Calendar & Scheduling (Webhook Handler)",
      "description": "Webhook endpoint to receive calendar events (e.g., Google Calendar) for scheduled interviews and APIs to list calendar events for a recruiter.",
      "user_flows": [
        "POST /api/webhooks/calendar with valid signed webhook payload -> Receive 200 OK -> POST /api/auth/login as recruiter -> Receive 200 and 'hireai-token' cookie -> GET /api/calendar/events with 'hireai-token' cookie -> Receive 200 with newly-synced event included",
        "POST /api/webhooks/calendar with missing/invalid signature -> Receive 401 Unauthorized -> GET /api/calendar/events without auth -> Receive 401 Unauthorized"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "backend",
    "tech_stack": [
      "typescript",
      "nextjs",
      "postgres",
      "drizzle-orm"
    ],
    "features": [
      {
        "name": "Job Management",
        "description": "CRUD operations for job postings",
        "files": [
          "app/api/jobs/route.ts",
          "app/api/jobs/[id]/route.ts"
        ],
        "endpoints": [
          {
            "method": "GET",
            "path": "/api/jobs",
            "description": "List jobs",
            "auth_required": false
          },
          {
            "method": "POST",
            "path": "/api/jobs",
            "description": "Create a job",
            "auth_required": true
          }
        ]
      },
      {
        "name": "Authentication",
        "description": "User authentication",
        "files": [
          "app/api/auth/login/route.ts",
          "app/api/auth/register/route.ts"
        ],
        "endpoints": [
          {
            "method": "POST",
            "path": "/api/auth/login",
            "description": "Log in user",
            "auth_required": false
          },
          {
            "method": "POST",
            "path": "/api/auth/register",
            "description": "Register user",
            "auth_required": false
          }
        ]
      }
    ],
    "known_limitations": []
  }
}
